(this.webpackJsonpclient=this.webpackJsonpclient||[]).push([[0],{20:function(e,a,t){},33:function(e,a,t){},34:function(e,a,t){},36:function(e,a,t){},40:function(e,a,t){e.exports=t(78)},45:function(e,a,t){},70:function(e,a,t){},71:function(e,a,t){},72:function(e,a,t){},73:function(e,a,t){},75:function(e,a,t){},76:function(e,a,t){},77:function(e,a,t){},78:function(e,a,t){"use strict";t.r(a);var n=t(0),s=t.n(n),l=t(37),r=t.n(l),c=t(1),i=t(2),o=t(4),m=t(3),u=t(6),d=(t(45),t(5)),h=t.n(d),p=function(e,a){return h.a.post("/api/auth/signup",{username:e,password:a}).then((function(e){return e.data})).catch((function(e){return e.response.data}))},g=function(e,a){return h.a.post("/api/auth/login",{username:e,password:a}).then((function(e){return e.data})).catch((function(e){return e.response.data}))},E=(t(9),t(63),function(e){h.a.delete("/api/auth/logout").then((function(e){return e.data})).catch((function(e){return e.response.data})).then((function(){console.log("loggedout",e),e.setUser(null)}))}),v=function(e){Object(o.a)(t,e);var a=Object(m.a)(t);function t(){var e;Object(c.a)(this,t);for(var n=arguments.length,s=new Array(n),l=0;l<n;l++)s[l]=arguments[l];return(e=a.call.apply(a,[this].concat(s))).state={isActive:!1},e.toggle=function(){e.setState({isActive:!e.state.isActive})},e}return Object(i.a)(t,[{key:"render",value:function(){var e=this,a="navbar-menu";return this.state.isActive&&(a+=" is-active"),this.props.user?s.a.createElement(s.a.Fragment,null,s.a.createElement("nav",{className:"navbar",role:"navigation","aria-label":"main navigation"},s.a.createElement("div",{className:"navbar-brand"},s.a.createElement("a",{className:"navbar-item",href:"/dashboard"},s.a.createElement("img",{src:"/icon_swap.png",alt:"",height:"28"})),s.a.createElement("div",{className:"navbar-item"},"Welcome, ",this.props.user.username," \u2764\ufe0f"),s.a.createElement("a",{role:"button",className:"navbar-burger burger","data-target":"navMenu","aria-label":"menu","aria-expanded":"false",onClick:this.toggle},s.a.createElement("span",{"aria-hidden":"true"}),s.a.createElement("span",{"aria-hidden":"true"}),s.a.createElement("span",{"aria-hidden":"true"}))),s.a.createElement("div",{className:a,id:"navMenu"},s.a.createElement("div",{className:"navbar-start"},s.a.createElement("a",{className:"navbar-item",href:"/dashboard"},"Dashboard"),s.a.createElement("a",{className:"navbar-item",href:"/messages/".concat(this.props.user._id)},"Messages"),s.a.createElement("a",{className:"navbar-item",href:"/add"},"Add Item"),s.a.createElement("a",{className:"navbar-item",href:"/myfavs"},"Favourites"),s.a.createElement("a",{className:"navbar-item",href:"/search"},"Search")),s.a.createElement("div",{className:"navbar-end"},s.a.createElement("div",{className:"navbar-item"},s.a.createElement("div",{className:"buttons"},s.a.createElement("a",{className:"button is-danger is-light",href:"/",onClick:function(){return E(e.props)}},"Logout"))))))):null}}]),t}(n.Component),f=(t(20),function(e){Object(o.a)(t,e);var a=Object(m.a)(t);function t(){var e;Object(c.a)(this,t);for(var n=arguments.length,s=new Array(n),l=0;l<n;l++)s[l]=arguments[l];return(e=a.call.apply(a,[this].concat(s))).state={},e}return Object(i.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"hero-image"},s.a.createElement("a",{href:"/"},s.a.createElement("img",{className:"home-logo",src:"/icon_swap.png",alt:""})),s.a.createElement("div",{className:"hero-text"},s.a.createElement("h1",{style:{fontSize:"4.5rem"}},"Swapsies"),s.a.createElement("h3",null,"Have an item that might be better suited for someone else? ",s.a.createElement("br",null),"You know how to cook, sing, or maybe code?",s.a.createElement("br",null),s.a.createElement("strong",null," Find the perfect swap on Swapsies!")),s.a.createElement("div",{className:"buttons",style:{display:"block",margin:"1rem"}},s.a.createElement("a",{className:"button is-link is-light",href:"/signup"},"Sign up"),s.a.createElement("a",{className:"button is-link is-light",href:"/login"},"Log in"))))}}]),t}(n.Component)),b=t(8),N=(t(33),t(10)),y=(t(34),function(e){Object(o.a)(t,e);var a=Object(m.a)(t);function t(){var e;Object(c.a)(this,t);for(var n=arguments.length,s=new Array(n),l=0;l<n;l++)s[l]=arguments[l];return(e=a.call.apply(a,[this].concat(s))).state={username:"",password:"",message:""},e.handleChange=function(a){var t=a.target,n=t.name,s=t.value;e.setState(Object(b.a)({},n,s))},e.handleSubmit=function(a){a.preventDefault();var t=e.state,n=t.username,s=t.password;p(n,s).then((function(a){a.message?e.setState({message:a.message,username:"",password:""}):(e.props.setUser(a),e.props.history.push("/dashboard"))}))},e}return Object(i.a)(t,[{key:"render",value:function(){return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"auth-container"},s.a.createElement("form",{onSubmit:this.handleSubmit},s.a.createElement("div",{className:"field input-form"},s.a.createElement("a",{href:"/"},s.a.createElement("img",{className:"auth-logo",src:"/icon_swap.png",alt:""})),s.a.createElement("h1",{className:"title is-1"},"Sign Up"),s.a.createElement("div",{className:"field"},s.a.createElement("label",{className:"label"},"Username"),s.a.createElement("div",{className:"control"},s.a.createElement("input",{className:"input",type:"text",name:"username",value:this.state.username,onChange:this.handleChange,id:"username",placeholder:"My username"}))),s.a.createElement("div",{className:"field"},s.a.createElement("label",{className:"label"},"Password"),s.a.createElement("div",{className:"control"},s.a.createElement("input",{className:"input",type:"password",name:"password",value:this.state.password,onChange:this.handleChange,id:"password",placeholder:"My password"}))),s.a.createElement("div",{className:"notice"},this.state.message&&s.a.createElement("p",null,this.state.message)),s.a.createElement("div",{className:"field button-group"},s.a.createElement("div",{className:"control"},s.a.createElement("button",{type:"submit",value:"Signup",class:"button is-link is-light"},"Sign up")),s.a.createElement("div",{className:"alt-link"},s.a.createElement(N.b,{to:"/login"},s.a.createElement("p",null,"Already have an account? Click here to login."))))))))}}]),t}(n.Component)),C=function(e){Object(o.a)(t,e);var a=Object(m.a)(t);function t(){var e;Object(c.a)(this,t);for(var n=arguments.length,s=new Array(n),l=0;l<n;l++)s[l]=arguments[l];return(e=a.call.apply(a,[this].concat(s))).state={username:"",password:"",message:""},e.handleChange=function(a){var t=a.target,n=t.name,s=t.value;e.setState(Object(b.a)({},n,s))},e.handleSubmit=function(a){a.preventDefault();var t=e.state,n=t.username,s=t.password;g(n,s).then((function(a){a.message?e.setState({message:a.message,username:"",password:""}):(e.props.setUser(a),e.props.history.push("/dashboard"))}))},e}return Object(i.a)(t,[{key:"render",value:function(){return s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"auth-container"},s.a.createElement("form",{onSubmit:this.handleSubmit},s.a.createElement("div",{className:"field input-form"},s.a.createElement("a",{href:"/"},s.a.createElement("img",{className:"auth-logo",src:"/icon_swap.png",alt:""})),s.a.createElement("h1",{className:"title is-1"},"Login"),s.a.createElement("div",{className:"field"},s.a.createElement("label",{className:"label"},"Username"),s.a.createElement("div",{className:"control"},s.a.createElement("input",{className:"input",type:"text",name:"username",value:this.state.username,onChange:this.handleChange,id:"username",placeholder:"My username"}))),s.a.createElement("div",{className:"field"},s.a.createElement("label",{className:"label"},"Password"),s.a.createElement("div",{className:"control"},s.a.createElement("input",{className:"input",type:"password",name:"password",value:this.state.password,onChange:this.handleChange,id:"password",placeholder:"My password"}))),s.a.createElement("div",{className:"notice"},this.state.message&&s.a.createElement("p",null,this.state.message)),s.a.createElement("div",{className:"field button-group"},s.a.createElement("div",{className:"control"},s.a.createElement("button",{type:"submit",value:"Login",className:"button is-link is-light"},"Login")),s.a.createElement("div",{className:"alt-link"},s.a.createElement(N.b,{to:"/signup"},s.a.createElement("p",null,"Don't have an account yet? Click here to signup!"))))))))}}]),t}(n.Component),w=t(15),S=t.n(w),O=t(17),k=t(23),j=(t(70),function(e){Object(o.a)(t,e);var a=Object(m.a)(t);function t(){var e;Object(c.a)(this,t);for(var n=arguments.length,s=new Array(n),l=0;l<n;l++)s[l]=arguments[l];return(e=a.call.apply(a,[this].concat(s))).state={username:e.props.user.username,profileImgPath:e.props.user.profileImgPath||"",selectedImage:null,bio:e.props.user.bio,email:e.props.user.email,location:e.props.user.location,locationOptions:["Select Kiez","Charlottenburg","Friedrichshain","Kreuzberg","Mitte","Moabit","Neuk\xf6lln","Prenzlauer Berg","Sch\xf6neberg","Wedding","Wilmersdorf","Janz weit drau\xdfen"],addWish:"",deleteWish:"",wishList:e.props.user.wishList},e.handleChange=function(a){var t,n=a.target,s=n.name,l=n.value;e.setState((t={},Object(b.a)(t,s,l),Object(b.a)(t,"profileImgPath",e.state.profileImgPath),t))},e.handleImageChange=function(a){console.log("this is the event.target.files[0]",a.target.files[0]),e.setState({selectedImage:a.target.files[0]}),console.log("this.state.selectedImage before upload: ",e.state.selectedImage)},e.handleWishlistChange=function(a){var t=e.state.addWish;""!==t&&(e.setState({wishList:[].concat(Object(k.a)(e.state.wishList),[t]),addWish:""}),console.log("wishlist at end of add wish function",e.state.wishList))},e.handleDeleteWish=function(a){var t=a.target.value,n=Object(k.a)(e.state.wishList),s=n.indexOf(t);n.splice(s,1),console.log(n),e.setState({wishList:n})},e.handleSubmit=function(){var a=Object(O.a)(S.a.mark((function a(t){var n,s,l,r;return S.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(t.preventDefault(),!e.state.selectedImage){a.next=10;break}return(s=new FormData).append("imageUrl",e.state.selectedImage),a.next=6,h.a.post("/api/user/upload",s);case 6:l=a.sent,n=l.data.secure_url,a.next=11;break;case 10:n=e.props.user.profileImgPath;case 11:r={username:e.state.username,email:e.state.email,bio:e.state.bio,location:e.state.location,id:e.props.user._id,wishList:e.state.wishList},h.a.put("/api/user/".concat(r.id),{username:r.username,email:r.email,bio:r.bio,location:r.location,profileImgPath:n,wishList:r.wishList}).then((function(a){console.log(a);var t=a.data;e.props.setUser(t)})).then((function(){e.props.history.push("/dashboard")})).catch((function(e){console.log("Error updating user info",e)}));case 13:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e}return Object(i.a)(t,[{key:"render",value:function(){var e=this,a=this.state,t=a.username,n=a.email,l=a.bio,r=a.wishList,c=a.location,i=a.locationOptions,o=a.addWish;a.deleteWish;return s.a.createElement("div",{className:"main"},s.a.createElement("form",{onSubmit:this.handleSubmit},s.a.createElement("div",{className:"field"},s.a.createElement("label",{className:"label"},"Edit your profile")),s.a.createElement("div",{className:"field"},s.a.createElement("label",{className:"label"},"Username"),s.a.createElement("div",{className:"control"},s.a.createElement("input",{className:"input",type:"text",name:"username",value:t,id:"username",placeholder:t,onChange:this.handleChange,required:!0}))),s.a.createElement("div",{className:"field"},s.a.createElement("label",{className:"label"},"Profile picture"),s.a.createElement("div",{className:"file has-name"},s.a.createElement("label",{className:"file-label"},s.a.createElement("input",{className:"file-input",type:"file",name:"imageUrl",onChange:this.handleImageChange}),s.a.createElement("span",{className:"file-cta"},s.a.createElement("span",{className:"file-label"},"Choose a file")),s.a.createElement("span",{className:"file-name"},this.state.selectedImage?this.state.selectedImage.name:"No file chosen")))),s.a.createElement("div",{className:"field"},s.a.createElement("label",{className:"label"},"Email"),s.a.createElement("div",{className:"control"},s.a.createElement("input",{className:"input",type:"text",name:"email",value:n||void 0,id:"email",placeholder:"Add email address",onChange:this.handleChange}))),s.a.createElement("div",{className:"field"},s.a.createElement("label",{className:"label"},"Location"),s.a.createElement("div",{className:"control"},s.a.createElement("div",{className:"select"},s.a.createElement("select",{id:"location",name:"location",value:c,onChange:this.handleChange},i.map((function(e){return s.a.createElement("option",{value:e,key:e},e)})))))),s.a.createElement("div",{className:"field"},s.a.createElement("label",{className:"label"},"Bio"),s.a.createElement("div",{className:"field-body"},s.a.createElement("div",{className:"field"},s.a.createElement("div",{className:"control"},s.a.createElement("textarea",{className:"textarea",type:"text",name:"bio",value:l||void 0,onChange:this.handleChange,id:"bio",placeholder:"Add your bio",rows:"3"}))))),s.a.createElement("div",{className:"field"},s.a.createElement("label",{className:"label"},"Wishlist"),s.a.createElement("div",{className:"content"},s.a.createElement("div",{className:"edit-wishlist-container"},0===r.length?s.a.createElement("p",null,"There are no items or services in your wish list"):r.map((function(a){return s.a.createElement("li",{key:a},a,s.a.createElement("button",{className:"button is-light",type:"button",name:"deleteWish",value:a,onClick:e.handleDeleteWish},"Delete wish"))})))),s.a.createElement("div",{className:"field has-addons"},s.a.createElement("div",{className:"control"},s.a.createElement("input",{className:"input",type:"text",placeholder:"My wish",name:"addWish",value:o,onChange:this.handleChange})),s.a.createElement("div",{className:"control"},s.a.createElement("button",{type:"button",className:"button is-light",onClick:this.handleWishlistChange},"Add item to wish list")))),s.a.createElement("div",{className:"control"},s.a.createElement("button",{type:"submit",value:"submit",className:"button is-link is-light"},"Update profile"))))}}]),t}(n.Component)),I=(t(36),function(e){Object(o.a)(t,e);var a=Object(m.a)(t);function t(){var e;Object(c.a)(this,t);for(var n=arguments.length,s=new Array(n),l=0;l<n;l++)s[l]=arguments[l];return(e=a.call.apply(a,[this].concat(s))).deleteItem=function(a){h.a.delete("/api/items/".concat(a.target.value)).then((function(a){e.props.setUser(a.data)})).catch((function(e){console.log(e)}))},e}return Object(i.a)(t,[{key:"render",value:function(){var e=this,a=this.props.user.inventory.filter((function(e){if("Thing"===e.type)return!0})).map((function(a){return console.log(a.itemImgPath,"thing.itemimgpath"),s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"card inventory-card",key:a._id},s.a.createElement("div",{className:"card-content"},s.a.createElement("div",{className:"media"},s.a.createElement("div",{className:"media-left"},s.a.createElement("figure",{class:"image is-96x96"},s.a.createElement("img",{src:a.itemImgPath,alt:"picture of thing"}))),s.a.createElement("div",{className:"content"},s.a.createElement("p",{className:"title is-5 has-margin-bottom-1"},a.name),s.a.createElement("p",{className:"has-margin-bottom-1"},"Category: ",a.category),s.a.createElement("p",{className:"has-margin-bottom-1"},"Location: ",a.location),s.a.createElement("p",{className:"has-margin-bottom-1"},"Description: ",a.description),e.props.user._id===e.props.loggedInUser._id?s.a.createElement(s.a.Fragment,null,s.a.createElement("p",{className:"has-margin-bottom-1"},"Status: ",a.status),s.a.createElement("div",{className:"buttons are-small inventory-button"},s.a.createElement(N.b,{to:"/items/".concat(a._id)},s.a.createElement("button",{className:"button"},"Edit")),s.a.createElement("button",{id:a._id,name:a,value:a._id,onClick:e.deleteItem,className:"button"},"Delete"))):s.a.createElement(s.a.Fragment,null,s.a.createElement("p",{className:"has-margin-bottom-1"},"Status: ",a.status),s.a.createElement("div",{className:"buttons are-small inventory-button"},s.a.createElement(N.b,{to:"/swap/".concat(a._id)},s.a.createElement("button",{className:"button",id:a._id},"Offer Swap")))))))))}));return s.a.createElement("div",null,a.length<1&&this.props.loggedInUser._id===this.props.user._id?s.a.createElement(s.a.Fragment,null):s.a.createElement("div",null,s.a.createElement("h4",{className:"title is-4 has-margin-top-1"},"List of Things"),s.a.createElement("div",{className:"inventory-container"}," ",a)))}}]),t}(n.Component)),U=function(e){Object(o.a)(t,e);var a=Object(m.a)(t);function t(){var e;Object(c.a)(this,t);for(var n=arguments.length,s=new Array(n),l=0;l<n;l++)s[l]=arguments[l];return(e=a.call.apply(a,[this].concat(s))).deleteService=function(a){console.log("event target value",a.target.value),h.a.delete("/api/items/".concat(a.target.value)).then((function(a){console.log(a.data),e.props.setUser(a.data)})).catch((function(e){console.log(e)}))},e}return Object(i.a)(t,[{key:"render",value:function(){var e=this;console.log(this.props);var a=this.props.user.inventory.filter((function(e){if("Service"===e.type)return!0})).map((function(a){return s.a.createElement("div",{className:"card inventory-card"},s.a.createElement("div",{className:"card-content"},s.a.createElement("div",{className:"media"},s.a.createElement("div",{className:"media-left"},s.a.createElement("figure",{class:"image is-96x96"},s.a.createElement("img",{src:a.itemImgPath,alt:"picture of thing"}))),s.a.createElement("div",{className:"content"},s.a.createElement("p",{className:"title is-5 has-margin-bottom-1"},a.name),s.a.createElement("p",{className:"has-margin-bottom-1"},"Location: ",a.location),s.a.createElement("p",{className:"has-margin-bottom-1"},"Description: ",a.description),e.props.user._id===e.props.loggedInUser._id?s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"buttons are-small inventory-button"},s.a.createElement(N.b,{to:"/items/".concat(a._id)},s.a.createElement("button",{className:"button"},"Edit")),s.a.createElement("button",{id:a._id,name:a,value:a._id,onClick:e.deleteService,className:"button"},"Delete"))):s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"buttons are-small inventory-button"},s.a.createElement(N.b,{to:"/swap/".concat(a._id)},s.a.createElement("button",{className:"button",id:a._id},"Offer Swap"))))))))}));return s.a.createElement("div",null,a.length<1&&this.props.loggedInUser._id===this.props.user._id?s.a.createElement(s.a.Fragment,null):s.a.createElement("div",null,s.a.createElement("h4",{className:"title is-4 has-margin-top-1"},"List of Services"),s.a.createElement("div",{className:"inventory-container"}," ",a)))}}]),t}(n.Component),x=(t(71),function(e){Object(o.a)(t,e);var a=Object(m.a)(t);function t(){var e;Object(c.a)(this,t);for(var n=arguments.length,s=new Array(n),l=0;l<n;l++)s[l]=arguments[l];return(e=a.call.apply(a,[this].concat(s))).state={editForm:!1},e}return Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this,a=this.props.user._id;return h.a.get("/api/user/".concat(a)).then((function(a){e.props.setUser(a.data)})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e=this.props.user,a=e.username,t=e.profileImgPath,n=e.location,l=e.bio,r=e.email,c=e.wishList;e.messages,e.inventory,e._id;return"Select Kiez"===n&&(n=null),s.a.createElement("div",{className:"main"},s.a.createElement("div",{className:"card card-dashboard"},s.a.createElement("div",{className:"card-container"},s.a.createElement("div",{className:"card-image",style:{padding:"1.5rem"}},s.a.createElement("figure",{className:"image is-128x128"},s.a.createElement("img",{className:"is-rounded",src:t||"https://images.unsplash.com/photo-1515160813423-b851dc54a427",alt:"profileImg"}))),s.a.createElement("div",{className:"media"},s.a.createElement("div",{className:"media-content dashboard"},s.a.createElement("p",{className:"title is-2"},a),s.a.createElement("p",{className:"subtitle is-6",style:{marginBottom:"0.5rem"}},r||null,r&&n?" \xb7 ":null,n||null),s.a.createElement("p",{className:"subtitle is-6",style:{marginBottom:"0.5rem"}},l||s.a.createElement("a",{href:"/edit"},"Add your bio"))))),s.a.createElement("div",{className:"content wishlist"},s.a.createElement("b",null,"Wishlist"),s.a.createElement("ul",{className:"wish-items"},c.length>0?c.map((function(e){return s.a.createElement("li",{key:e},e)})):s.a.createElement("p",{className:"empty-item"},"Nothing yet."))),s.a.createElement("footer",{className:"card-footer",style:{padding:"0.5rem"}},s.a.createElement("a",{href:"/edit",className:"card-footer-item"},"Edit Profile"),s.a.createElement("a",{href:"/add",className:"card-footer-item"},"Add an Item"))),s.a.createElement("div",null,s.a.createElement(U,{setUser:this.props.setUser,user:this.props.user,loggedInUser:this.props.user}),s.a.createElement(I,{setUser:this.props.setUser,user:this.props.user,loggedInUser:this.props.user,history:this.props.history})))}}]),t}(n.Component)),_=function(e){Object(o.a)(t,e);var a=Object(m.a)(t);function t(){var e;Object(c.a)(this,t);for(var n=arguments.length,s=new Array(n),l=0;l<n;l++)s[l]=arguments[l];return(e=a.call.apply(a,[this].concat(s))).state={name:"",itemImgPath:"https://images.unsplash.com/photo-1429087969512-1e85aab2683d",selectedImage:null,type:"",category:"",description:"",location:e.props.user.location,locationOptions:["Select Kiez","Charlottenburg","Friedrichshain","Kreuzberg","Mitte","Moabit","Neuk\xf6lln","Prenzlauer Berg","Sch\xf6neberg","Wedding","Wilmersdorf","Janz weit drau\xdfen"],selectedCategory:"",categoryOptions:["Select","Bike stuff","Clothes","Collectables & Memorabilia","Electronics","Food","Furniture","Gardening tools","Kitchen supplies","Plants","Other"]},e.handleChange=function(a){var t,n=a.target,s=n.name,l=n.value;e.setState((t={},Object(b.a)(t,s,l),Object(b.a)(t,"itemImgPath",e.state.itemImgPath),t))},e.handleImageChange=function(a){console.log("this is the event.target.files[0]",a.target.files[0]),e.setState({selectedImage:a.target.files[0]}),console.log("this.state.selectedImage before upload: ",e.state.selectedImage)},e.handleSubmit=function(){var a=Object(O.a)(S.a.mark((function a(t){var n,s,l,r,c,i,o,m,u;return S.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(t.preventDefault(),!e.state.selectedImage){a.next=11;break}return s=new FormData,console.log(e.state.selectedImage,"this state selected image before upload append"),s.append("itemImageUrl",e.state.selectedImage),a.next=7,h.a.post("/api/items/upload",s);case 7:l=a.sent,n=l.data.secure_url,a.next=12;break;case 11:n=e.state.itemImgPath;case 12:return r=e.state,c=r.name,i=r.category,o=r.location,m=r.description,"Service"===(u=r.type)&&(i="None"),a.abrupt("return",h.a.post("/api/items",{owner:e.props.user._id,favourites:0,status:"Available",name:c,description:m,location:o,type:u,category:i,itemImgPath:n}).then((function(a){console.log(a);var t=a.data;e.props.setUser(t),e.setState({name:"",description:"",itemImgPath:"",type:"",category:"",selectedCategory:"",location:e.props.user.location})})).then((function(){e.props.history.push("/dashboard")})).catch((function(e){console.log("Error adding item",e)})));case 15:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e}return Object(i.a)(t,[{key:"render",value:function(){console.log(this.props);var e=this.state,a=(e.name,e.description,e.location),t=e.locationOptions,n=(e.itemImgPath,e.category),l=(e.selectedCategory,e.categoryOptions),r=e.type;return s.a.createElement("div",{className:"main"},s.a.createElement("form",{onSubmit:this.handleSubmit},s.a.createElement("div",{className:"field"},s.a.createElement("label",{className:"label"},"Add new item")),s.a.createElement("div",{className:"field"},s.a.createElement("label",{className:"label"},"Is this a service or thing?"),s.a.createElement("div",{className:"control"},s.a.createElement("div",{className:"select"},s.a.createElement("select",{id:"type",name:"type",onChange:this.handleChange,required:!0},s.a.createElement("option",{value:""},"Select"),s.a.createElement("option",{value:"Thing"},"Thing"),s.a.createElement("option",{value:"Service"},"Service"))))),"Service"!==r&&s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"field"},s.a.createElement("label",{className:"label"},"Category"),s.a.createElement("div",{className:"control"},s.a.createElement("div",{className:"select"},s.a.createElement("select",{name:"category",value:n,onChange:this.handleChange},l.map((function(e){return s.a.createElement("option",{value:e,key:e},e)}))))))),s.a.createElement("div",{className:"field"},s.a.createElement("label",{className:"label"},"Name"),s.a.createElement("div",{className:"control"},s.a.createElement("input",{className:"input",type:"text",name:"name",value:this.state.name,onChange:this.handleChange,id:"name",placeholder:"Name of item",required:!0}))),s.a.createElement("div",{className:"field"},s.a.createElement("label",{class:"label"},"Description"),s.a.createElement("div",{className:"field-body"},s.a.createElement("div",{className:"field"},s.a.createElement("div",{className:"control"},s.a.createElement("textarea",{className:"textarea",type:"text",name:"description",value:this.state.description,onChange:this.handleChange,id:"description",placeholder:"Add a description",rows:"3"}))))),s.a.createElement("div",{className:"field"},s.a.createElement("label",{className:"label"},"Location:"),s.a.createElement("div",{className:"control"},s.a.createElement("div",{className:"select"},s.a.createElement("select",{name:"location",value:a,onChange:this.handleChange},t.map((function(e){return s.a.createElement("option",{value:e,key:e},e)})))))),s.a.createElement("div",{className:"field"},s.a.createElement("label",{className:"label"},"Add a photo"),s.a.createElement("div",{className:"file has-name"},s.a.createElement("label",{className:"file-label"},s.a.createElement("input",{className:"file-input",type:"file",name:"itemImageUrl",onChange:this.handleImageChange}),s.a.createElement("span",{className:"file-cta"},s.a.createElement("span",{className:"file-label"},"Choose a file")),s.a.createElement("span",{className:"file-name"},this.state.selectedImage?this.state.selectedImage.name:"No file chosen",s.a.createElement("span",{className:"file-icon"},s.a.createElement("i",{className:"fas fa-upload"})),s.a.createElement("span",{className:"file-label"},"Choose a file"))))),s.a.createElement("div",{className:"control"},s.a.createElement("button",{type:"submit",value:"add",class:"button is-link is-light"},"Add"))))}}]),t}(n.Component),F=(t(72),function(e){Object(o.a)(t,e);var a=Object(m.a)(t);function t(){var e;Object(c.a)(this,t);for(var n=arguments.length,s=new Array(n),l=0;l<n;l++)s[l]=arguments[l];return(e=a.call.apply(a,[this].concat(s))).state={search:"",type:"",availableCheck:!0,reservedCheck:!0,swappedCheck:!1,location:"Filter by Kiez",locationOptions:["Filter by Kiez","All","Charlottenburg","Friedrichshain","Kreuzberg","Mitte","Moabit","Neuk\xf6lln","Prenzlauer Berg","Sch\xf6neberg","Wedding","Wilmersdorf","Janz weit drau\xdfen"],category:"",categoryOptions:["Select","Bike stuff","Clothes","Collectables & Memorabilia","Electronics","Food","Furniture","Gardening tools","Kitchen supplies","Plants","Other"]},e.handleAvailableCheck=function(a){e.setState({availableCheck:a.target.checked})},e.handleReservedCheck=function(a){e.setState({reservedCheck:a.target.checked})},e.handleSwappedCheck=function(a){e.setState({swappedCheck:a.target.checked})},e.handleSearchChange=function(a){e.setState({search:a.target.value}),console.log(a.target.value)},e.handleTypeSelect=function(a){e.setState({type:a.target.value})},e.handleCategorySelect=function(a){e.setState({category:a.target.value})},e.handleKiezSelect=function(a){console.log("target value",a.target.value),e.setState({location:a.target.value})},e}return Object(i.a)(t,[{key:"render",value:function(){var e=this,a=this.props.user._id,t=this.state.location,n=this.state.locationOptions,l=this.state.category,r=this.state.categoryOptions,c=this.props.itemsList.filter((function(a){return(a.location===e.state.location||"Filter by Kiez"===e.state.location||"All"===e.state.location)&&(a.name.toLowerCase().includes(e.state.search.toLowerCase())||a.category.toLowerCase().includes(e.state.search.toLowerCase())||a.description.toLowerCase().includes(e.state.search.toLowerCase())?a:void 0)})),i=c.filter((function(a){return""===e.state.category?"Thing"===a.type:"Thing"===a.type&&a.category===e.state.category})),o=i.filter((function(a){return!!function(a){return!!e.state.availableCheck&&"Available"===a.status}(a)||(!!function(a){return!!e.state.reservedCheck&&"Reserved"===a.status}(a)||!!function(a){return!!e.state.swappedCheck&&"Swapped"===a.status}(a))})),m=c.filter((function(e){return"Service"===e.type})),u=o.map((function(e){return s.a.createElement("div",{className:"card card-itemsearch"},s.a.createElement("div",{className:"card-content"},s.a.createElement("div",{className:"media",style:{marginBottom:"0.7rem"}},s.a.createElement("div",{className:"media-left"},s.a.createElement("figure",{className:"item-image"},s.a.createElement("img",{src:e.itemImgPath,alt:"picture of thing"})))),s.a.createElement("div",{className:"content"},s.a.createElement("div",{className:"media-content"},s.a.createElement("p",{className:"title is-4"},e.name),s.a.createElement("p",{className:"subtitle is-6",style:{marginBottom:"0.5rem"}},e.location),s.a.createElement("p",{className:"subtitle is-7",style:{marginBottom:"0.5rem"}},"Favourites: ",e.favourites)),e.description,s.a.createElement("br",null),"Status: ",e.status,e.owner._id===a?s.a.createElement("p",null,"My post"):s.a.createElement("p",null,"Post by",s.a.createElement(s.a.Fragment,null," "),s.a.createElement("a",{href:"/user/".concat(e.owner._id)},e.owner.username)))),s.a.createElement("footer",{className:"card-footer"},s.a.createElement("a",{href:"#",class:"card-footer-item"},"Add to Favourites"),s.a.createElement("a",{href:"/swap/".concat(e._id),class:"card-footer-item"},"Offer Swap")))})),d=m.map((function(e){var t;return s.a.createElement("div",{className:"card"},s.a.createElement("div",{className:"card-content"},s.a.createElement("div",(t={className:"media"},Object(b.a)(t,"className","flex-container-center-content"),Object(b.a)(t,"style",{marginBottom:"0.7rem"}),t),s.a.createElement("div",{className:"media-left"},s.a.createElement("figure",{className:"item-image"},s.a.createElement("img",{src:e.itemImgPath,alt:"picture of service"}))),s.a.createElement("div",{className:"media-content"},s.a.createElement("p",{className:"title is-4"},e.name),s.a.createElement("p",{className:"subtitle is-6",style:{marginBottom:"0.5rem"}},e.location),s.a.createElement("p",{className:"subtitle is-6",style:{marginBottom:"0.5rem"}},"Favourites: ",e.favourites))),s.a.createElement("div",{className:"content"},e.description,e.owner._id===a?s.a.createElement("p",null,"My post"):s.a.createElement("p",null,"Post by",s.a.createElement(s.a.Fragment,null," "),s.a.createElement("a",{href:"/user/".concat(e.owner._id)},e.owner.username)))),s.a.createElement("footer",{class:"card-footer"},s.a.createElement("a",{href:"#",class:"card-footer-item"},"Add to Favourites"),s.a.createElement("a",{href:"/swap/".concat(e._id),class:"card-footer-item"},"Offer Swap")))}));return s.a.createElement("div",{className:"main"},s.a.createElement("label",{className:"label"},"What are you looking for?"),s.a.createElement("div",{className:"field"},s.a.createElement("div",{className:"control"},s.a.createElement("div",{className:"select"},s.a.createElement("select",{id:"itemtype",name:"itemtype",onChange:this.handleTypeSelect},s.a.createElement("option",{value:""},"Select"),s.a.createElement("option",{value:"Thing"},"Thing"),s.a.createElement("option",{value:"Service"},"Service"))))),"Thing"===this.state.type&&s.a.createElement(s.a.Fragment,null,s.a.createElement("label",{className:"label"},"Find by Category"),s.a.createElement("div",{className:"field"},s.a.createElement("div",{className:"control"},s.a.createElement("div",{className:"select"},s.a.createElement("select",{id:"category",name:"category",value:l,onChange:this.handleCategorySelect},r.map((function(e){return s.a.createElement("option",{value:e,key:e},e)}))))))),""!==this.state.type&&s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"field"},s.a.createElement("div",{className:"control"},s.a.createElement("input",{className:"input",name:"search",type:"text",placeholder:"Search",id:"search",value:this.state.search,onChange:this.handleSearchChange})))),""!==this.state.type&&s.a.createElement(s.a.Fragment,null,s.a.createElement("label",{className:"label"},"Location:"),s.a.createElement("div",{className:"field"},s.a.createElement("div",{className:"control"},s.a.createElement("div",{className:"select"},s.a.createElement("select",{id:"location",name:"location",value:t,onChange:this.handleKiezSelect},n.map((function(e){return s.a.createElement("option",{value:e,key:e},e)}))))))),"Thing"===this.state.type&&s.a.createElement(s.a.Fragment,null,s.a.createElement("label",{className:"checkbox",style:{marginRight:"1rem"}},s.a.createElement("input",{type:"checkbox",name:"Available",id:"available",checked:this.state.availableCheck,onChange:this.handleAvailableCheck}),"Available"),s.a.createElement("label",{className:"checkbox",style:{marginRight:"1rem"}},s.a.createElement("input",{type:"checkbox",name:"Reserved",id:"reserved",checked:this.state.reservedCheck,onChange:this.handleReservedCheck}),"Reserved"),s.a.createElement("label",{className:"checkbox",style:{marginRight:"1rem"}},s.a.createElement("input",{type:"checkbox",name:"Swapped",id:"swapped",checked:this.state.swappedCheck,onChange:this.handleSwappedCheck}),"Swapped")),s.a.createElement("div",null,"Thing"===this.state.type&&s.a.createElement("div",{className:"flex-container"},u)),s.a.createElement("div",null,"Service"===this.state.type&&s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"flex-container"},d))))}}]),t}(n.Component)),A=function(e){Object(o.a)(t,e);var a=Object(m.a)(t);function t(){var e;Object(c.a)(this,t);for(var n=arguments.length,s=new Array(n),l=0;l<n;l++)s[l]=arguments[l];return(e=a.call.apply(a,[this].concat(s))).state={},e}return Object(i.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"main"},s.a.createElement("h2",{className:"title is-4"},"Feature Coming Soon!"))}}]),t}(n.Component),L=function(e){Object(o.a)(t,e);var a=Object(m.a)(t);function t(){var e;Object(c.a)(this,t);for(var n=arguments.length,s=new Array(n),l=0;l<n;l++)s[l]=arguments[l];return(e=a.call.apply(a,[this].concat(s))).state={},e}return Object(i.a)(t,[{key:"render",value:function(){return s.a.createElement("div",{className:"main"},"Oops! Page Not Found")}}]),t}(n.Component),P=function(e){Object(o.a)(t,e);var a=Object(m.a)(t);function t(){var e;Object(c.a)(this,t);for(var n=arguments.length,s=new Array(n),l=0;l<n;l++)s[l]=arguments[l];return(e=a.call.apply(a,[this].concat(s))).state={otherUser:e.props.user,error:null},e}return Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this,a=this.props.match.params.userId;return h.a.get("/api/user/".concat(a)).then((function(a){e.setState({otherUser:a.data})})).catch((function(a){console.log(a),400===a.response.status&&e.setState({error:"User not found"})}))}},{key:"render",value:function(){var e=this.state.otherUser,a=e.bio,t=e.email,n=e.location,l=e.profileImgPath,r=e.username,c=e.wishList;return"Select Kiez"===n&&(n="No Location Selected"),this.state.error?s.a.createElement("div",{className:"main"},this.state.error):0===this.state.otherUser.inventory?s.a.createElement("div",{className:"main"},"This user currently has nothing to swap"):s.a.createElement("div",{className:"main"},s.a.createElement("div",{className:"card"},s.a.createElement("div",{className:"card-image",style:{padding:"1.5rem"}},s.a.createElement("figure",{className:"image is-128x128"},s.a.createElement("img",{className:"is-rounded",src:l||"https://images.unsplash.com/photo-1534528741775-53994a69daeb",alt:"profileImg"}))),s.a.createElement("div",{className:"card-content"},s.a.createElement("div",{className:"media",style:{marginBottom:"0.5rem"}},s.a.createElement("div",{className:"media-content"},s.a.createElement("p",{className:"title is-4"},r),s.a.createElement("p",{className:"subtitle is-6",style:{marginBottom:"0.5rem"}},t||null,t&&n?" \xb7 ":null,n||null),s.a.createElement("p",{className:"subtitle is-6",style:{marginBottom:"0.5rem"}},a||null))),s.a.createElement("div",{className:"content wishlist"},s.a.createElement("b",null,"Wishlist"),s.a.createElement("ul",null,"                ",c.length>0?c.map((function(e){return s.a.createElement("li",{key:e},e)})):s.a.createElement("li",null,r," has no wishes yet."))))),s.a.createElement("hr",null),s.a.createElement("div",null,s.a.createElement(I,{user:this.state.otherUser,loggedInUser:this.props.user}),s.a.createElement(U,{user:this.state.otherUser,loggedInUser:this.props.user})))}}]),t}(n.Component),D=(t(73),t(39)),M=t.n(D),W=function(e){Object(o.a)(t,e);var a=Object(m.a)(t);function t(){var e;Object(c.a)(this,t);for(var n=arguments.length,s=new Array(n),l=0;l<n;l++)s[l]=arguments[l];return(e=a.call.apply(a,[this].concat(s))).state={message:""},e.handleChange=function(a){var t=a.target.value;e.setState({message:t})},e.handleSubmit=function(a){a.preventDefault();var t=!1;return e.props.user._id===e.props.chat.userReceive._id&&(t=!0),h.a.put("/api/chat",{id:e.props.chat._id,messages:[{sentByOwner:t,msg:e.state.message}]}).then((function(){e.setState({message:""}),e.props.setChat(),e.props.setUser(e.props.user)})).catch((function(e){console.log(e)}))},e}return Object(i.a)(t,[{key:"render",value:function(){var e=this,a=this.props.chat,t=a.item,n=a.messages,l=a.userSend,r=a.userReceive,c=n.map((function(a){return s.a.createElement("ul",{className:"chat-message"},s.a.createElement("li",null," ",a.sentByOwner?e.props.user._id===r._id?s.a.createElement("b",null,"You"):s.a.createElement("b",null,r.username):e.props.user._id===l._id?s.a.createElement("b",null,"You"):s.a.createElement("b",null,l.username),": "," "," ",a.msg),s.a.createElement("li",null,s.a.createElement("b",null,"Sent:"," "),M()(a.time).format("LLL")))}));return s.a.createElement("div",{className:"card message-box"},s.a.createElement("div",{className:"summary"},s.a.createElement("div",{className:"media-left"},s.a.createElement("figure",{className:"image is-64x64"},s.a.createElement("img",{src:t.itemImgPath?t.itemImgPath:"https://images.unsplash.com/photo-1587459803401-9d685b63b2cd",alt:"item image"}))),s.a.createElement("div",{className:"media-content"},s.a.createElement("div",{className:"content"},s.a.createElement("p",null,s.a.createElement("strong",null,t.name),s.a.createElement("br",null),s.a.createElement("small",null,t.type," "," \xb7 ",t.status,s.a.createElement("br",null),"from "," ",this.props.user._id===l._id?s.a.createElement("a",{href:"/user/".concat(r._id)},r.username):s.a.createElement("a",{href:"/user/".concat(l._id)},l.username)))))),s.a.createElement("div",{className:"content"},t.description),s.a.createElement("h5",{className:"title is-5"},"Thread"),c,s.a.createElement("form",{onSubmit:this.handleSubmit},s.a.createElement("div",{className:"field"},s.a.createElement("div",{className:"field-body"},s.a.createElement("div",{className:"field"},s.a.createElement("div",{className:"control"},s.a.createElement("textarea",{className:"textarea",type:"text",name:"message",value:this.state.message,onChange:this.handleChange,id:"message",rows:"2",placeholder:"Your message here",required:!0}))))),s.a.createElement("div",{className:"control gimmespace"},s.a.createElement("button",{type:"submit",value:"submit",className:"button is-light"},"Send"))))}}]),t}(n.Component),B=(t(75),function(e){Object(o.a)(t,e);var a=Object(m.a)(t);function t(){var e;Object(c.a)(this,t);for(var n=arguments.length,s=new Array(n),l=0;l<n;l++)s[l]=arguments[l];return(e=a.call.apply(a,[this].concat(s))).state={chatList:[]},e.setChat=function(a){var t=e.props.match.params.id;return h.a.get("/api/chat/".concat(t)).then((function(a){e.setState({chatList:a.data})})).catch((function(e){console.log(e)}))},e}return Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this,a=this.props.match.params.id;return h.a.get("/api/chat/".concat(a)).then((function(a){e.setState({chatList:a.data})})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e=this,a=this.props.user._id,t=this.state.chatList.filter((function(e){return e.userReceive._id===a&&null!==e.item})).map((function(a){return s.a.createElement(W,{setUser:e.props.setUser,setChat:e.setChat,chat:a,user:e.props.user})})),n=this.state.chatList.filter((function(e){return e.userSend._id===a&&null!==e.item})).map((function(a){return s.a.createElement(W,{setUser:e.props.setUser,chat:a,setChat:e.setChat,user:e.props.user})}));return s.a.createElement("div",{className:"main in-out-msg"},s.a.createElement("div",{className:"field thread"},s.a.createElement("h4",{className:"title is-4"},"Incoming Swap Requests"),t.length<1&&s.a.createElement("p",null,"Nothing yet."),t),s.a.createElement("div",{className:"field thread"},s.a.createElement("h4",{className:"title is-4"},"Outgoing Swap Offers"),n.length<1&&s.a.createElement("p",null,"Nothing yet."),n))}}]),t}(n.Component)),z=(t(76),function(e){Object(o.a)(t,e);var a=Object(m.a)(t);function t(){var e;Object(c.a)(this,t);for(var n=arguments.length,s=new Array(n),l=0;l<n;l++)s[l]=arguments[l];return(e=a.call.apply(a,[this].concat(s))).state={item:{owner:""},userSend:"",userReceive:"",message:"",owner:""},e.handleChange=function(a){var t=a.target,n=(t.name,t.value);e.setState({message:n})},e.handleSubmit=function(a){return a.preventDefault(),h.a.post("/api/chat",{userSend:e.props.user._id,userReceive:e.state.item.owner._id,item:e.state.item._id,messages:[{sentByOwner:!1,msg:e.state.message}]}).then((function(a){e.setState({item:{owner:""},userSend:"",userReceive:"",message:""}),e.props.setUser(e.props.user)})).then((function(){e.props.history.push("/dashboard")})).catch((function(e){console.log(e)}))},e}return Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this,a=this.props.match.params.item;return h.a.get("/api/items/".concat(a)).then((function(a){e.setState({item:a.data})})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){console.log(this.state);var e=this.state.item,a=e.name,t=(e.category,e.location),n=e.status,l=e.owner,r=e.description,c=e.itemImgPath;return s.a.createElement("div",{className:"main"},s.a.createElement("div",{className:"field"},s.a.createElement("label",{className:"label title is-3"},"Offer a Swap")),s.a.createElement("div",{className:"card"},s.a.createElement("div",{className:"card-image item-image"},s.a.createElement("figure",{className:"image"},s.a.createElement("img",{src:c,alt:"Item image"}))),s.a.createElement("div",{className:"card-content"},s.a.createElement("div",{className:"media"},s.a.createElement("div",{className:"media-left"},s.a.createElement("figure",{className:"image is-48x48"},s.a.createElement("img",{src:l.profileImgPath,alt:"User image"}))),s.a.createElement("div",{className:"media-content"},s.a.createElement("p",{className:"title is-4"},a),s.a.createElement("p",{className:"subtitle is-6"},"Posted by: ",s.a.createElement("a",{href:"/user/".concat(l._id)},l.username),l.email?" \xb7 "+l.email:null))),s.a.createElement("div",{className:"content"},s.a.createElement("p",{className:"subtitle is-6",style:{marginBottom:"0.5rem"}},r),s.a.createElement("p",{className:"subtitle is-6",style:{marginBottom:"0.5rem"}},n,t?" \xb7 "+t:null),s.a.createElement("form",{onSubmit:this.handleSubmit},s.a.createElement("textarea",{className:"textarea",id:"offerSwap",name:"offerswap",onChange:this.handleChange,placeholder:"Hey! Care to swap?",type:"text",value:this.state.message,rows:"3"}),s.a.createElement("div",{className:"control",style:{marginTop:"0.5rem"}},s.a.createElement("button",{type:"submit",value:"submit",className:"button is-link is-light"},"Send message")))))))}}]),t}(n.Component)),T=(t(77),function(e){Object(o.a)(t,e);var a=Object(m.a)(t);function t(){var e;Object(c.a)(this,t);for(var n=arguments.length,s=new Array(n),l=0;l<n;l++)s[l]=arguments[l];return(e=a.call.apply(a,[this].concat(s)))._isMounted=!1,e.state={item:null,type:"",category:"",name:"",description:"",status:"",location:"",itemImgPath:"",selectedImage:null,error:null,locationOptions:["Select Kiez","All","Charlottenburg","Friedrichshain","Kreuzberg","Mitte","Moabit","Neuk\xf6lln","Sch\xf6neberg","Prenzlauer Berg","Wedding","Wilmersdorf","Janz weit drau\xdfen"],categoryOptions:["Select","Bike stuff","Clothes","Collectables & Memorabilia","Electronics","Food","Furniture","Gardening tools","Kitchen supplies","Plants","Other"]},e.getData=function(){var a=e.props.match.params.id;h.a.get("/api/items/".concat(a)).then((function(a){var t=a.data,n=t.location,s=t.type,l=t.description,r=t.name,c=t.category,i=t.status,o=t.itemImgPath;e._isMounted&&e.setState({item:a.data,location:n,type:s,description:l,name:r,category:c,status:i,itemImgPath:o})})).catch((function(a){404===a.response.status&&e.setState({error:"Item not found"})}))},e.componentDidMount=function(){e._isMounted=!0,e.getData()},e.handleChange=function(a){var t=a.target,n=t.name,s=t.value;e.setState(Object(b.a)({},n,s))},e.handleImageChange=function(a){console.log("this is the event.target.files[0]",a.target.files[0]),e.setState({selectedImage:a.target.files[0]})},e.handleSubmit=function(){var a=Object(O.a)(S.a.mark((function a(t){var n,s,l,r,c,i,o,m,u,d;return S.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(console.log("running"),console.log(e.state.selectedImage),t.preventDefault(),!e.state.selectedImage){a.next=12;break}return(s=new FormData).append("itemImageUrl",e.state.selectedImage),a.next=8,h.a.post("/api/items/upload",s);case 8:l=a.sent,n=l.data.secure_url,a.next=13;break;case 12:n=e.state.itemImgPath;case 13:return r=e.state,c=r.name,i=r.category,o=r.location,m=r.description,u=r.type,d=r.status,console.log("this is the image",n),"Service"===u&&(i="None",d="Available"),a.abrupt("return",h.a.put("/api/items/",{id:e.state.item._id,status:d,name:c,description:m,location:o,type:u,category:i,itemImgPath:n}).then((function(a){console.log(a),e.setState({name:"",description:"",selectedImage:null,type:"",category:"",status:"",location:""})})).then((function(){e.props.history.push("/dashboard")})).catch((function(e){console.log(e)})));case 17:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}(),e}return Object(i.a)(t,[{key:"componentWillUnmount",value:function(){this._isMounted=!1}},{key:"render",value:function(){var e=this.state,a=e.item,t=e.locationOptions,n=e.categoryOptions;return this.state.error?s.a.createElement("div",null,this.state.error):this.state.item?s.a.createElement("div",{className:"main"},s.a.createElement("form",{onSubmit:this.handleSubmit},s.a.createElement("div",{className:"field"},s.a.createElement("label",{class:"label"},"Edit ",a.name)),s.a.createElement("div",{className:"field"},s.a.createElement("label",{class:"label"},"Is this a service or thing?"),s.a.createElement("div",{className:"control"},s.a.createElement("div",{className:"select"},s.a.createElement("select",{id:"type",value:this.state.type,name:"type",onChange:this.handleChange,required:!0},s.a.createElement("option",{value:""},"Select"),s.a.createElement("option",{value:"Thing"},"Thing"),s.a.createElement("option",{value:"Service"},"Service"))))),s.a.createElement("div",{className:"field"},s.a.createElement("label",{className:"label"},"Update photo"),s.a.createElement("div",{className:"file has-name"},s.a.createElement("label",{className:"file-label"},s.a.createElement("input",{className:"file-input",type:"file",name:"itemImageUrl",onChange:this.handleImageChange}),s.a.createElement("span",{className:"file-cta"},s.a.createElement("span",{className:"file-label"},"Choose a file")),s.a.createElement("span",{className:"file-name"},this.state.selectedImage?this.state.selectedImage.name:"No file chosen")))),"Service"!==this.state.type&&s.a.createElement(s.a.Fragment,null,s.a.createElement("div",{className:"field"},s.a.createElement("label",{class:"label"},"Category"),s.a.createElement("div",{className:"control"},s.a.createElement("div",{className:"select"},s.a.createElement("select",{id:"category",name:"category",onChange:this.handleChange,value:this.state.category,required:!0},n.map((function(e){return s.a.createElement("option",{value:e,key:e},e)}))))))),s.a.createElement("div",{className:"field"},s.a.createElement("label",{htmlFor:"name",class:"label"},"Name"),s.a.createElement("div",{className:"control"},s.a.createElement("input",{class:"input",type:"text",name:"name",value:this.state.name,onChange:this.handleChange,id:"name",placeholder:"Name of item",required:!0}))),s.a.createElement("div",{className:"field"},s.a.createElement("label",{htmlFor:"description",class:"label"},"Description"),s.a.createElement("div",{className:"control"},s.a.createElement("input",{class:"input",type:"text",name:"description",value:this.state.description,onChange:this.handleChange,id:"description",placeholder:"Add a description",required:!0}))),s.a.createElement("label",{class:"label"},"Location"),s.a.createElement("div",{className:"select"},s.a.createElement("select",{name:"location",value:this.state.location,onChange:this.handleChange,required:!0},t.map((function(e){return s.a.createElement("option",{value:e,key:e},e)})))),"Service"!==a.type&&s.a.createElement(s.a.Fragment,null),"Service"!==a.type&&s.a.createElement(s.a.Fragment,null,s.a.createElement("label",{htmlFor:"status",class:"label"},"Status"),s.a.createElement("div",{className:"select"},s.a.createElement("select",{id:"status",name:"status",onChange:this.handleChange,value:this.state.status,required:!0},s.a.createElement("option",{value:"Available"},"Available"),s.a.createElement("option",{value:"Reserved"},"Reserved"),s.a.createElement("option",{value:"Swapped"},"Swapped")))),s.a.createElement("div",{className:"control"},s.a.createElement("button",{type:"submit",value:"add",className:"button is-link is-light gimmespace"},"Edit")))):s.a.createElement("div",null)}}]),t}(n.Component)),K=function(e){Object(o.a)(t,e);var a=Object(m.a)(t);function t(){var e;Object(c.a)(this,t);for(var n=arguments.length,s=new Array(n),l=0;l<n;l++)s[l]=arguments[l];return(e=a.call.apply(a,[this].concat(s))).state={user:e.props.user,allItems:[]},e.setUser=function(a){e.setState({user:a})},e.getData=function(){h.a.get("/api/items").then((function(a){e.setState({allItems:a.data})})).catch((function(e){console.log(e)}))},e}return Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;h.a.get("/api/items").then((function(a){e.setState({allItems:a.data})})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){var e=this;return s.a.createElement("div",{className:"App"},s.a.createElement(v,{user:this.state.user,setUser:this.setUser}),s.a.createElement(u.c,null,s.a.createElement(u.a,{exact:!0,path:"/",component:f}),s.a.createElement(u.a,{exact:!0,path:"/edit",render:function(a){return s.a.createElement(j,Object.assign({user:e.state.user,setUser:e.setUser},a))}}),s.a.createElement(u.a,{exact:!0,path:"/signup",render:function(a){return s.a.createElement(y,Object.assign({setUser:e.setUser},a))}}),s.a.createElement(u.a,{exact:!0,path:"/messages/:id",render:function(a){return s.a.createElement(B,Object.assign({setUser:e.setUser,user:e.state.user},a))}}),s.a.createElement(u.a,{exact:!0,path:"/login",render:function(a){return s.a.createElement(C,Object.assign({setUser:e.setUser},a))}}),s.a.createElement(u.a,{exact:!0,path:"/add",render:function(a){return s.a.createElement(_,Object.assign({user:e.state.user,setUser:e.setUser,getData:e.getData},a))}}),s.a.createElement(u.a,{exact:!0,path:"/swap/:item",render:function(a){return s.a.createElement(z,Object.assign({user:e.state.user,setUser:e.setUser},a))}}),s.a.createElement(u.a,{exact:!0,path:"/items/:id",render:function(a){return s.a.createElement(T,Object.assign({user:e.state.user,setUser:e.setUser},a))}}),s.a.createElement(u.a,{exact:!0,path:"/user/:userId",render:function(a){return s.a.createElement(P,Object.assign({user:e.state.user,setUser:e.setUser},a))}}),s.a.createElement(u.a,{exact:!0,path:"/search",render:function(a){return s.a.createElement(F,Object.assign({itemsList:e.state.allItems,user:e.state.user},a))}}),s.a.createElement(u.a,{exact:!0,path:"/myfavs",render:function(e){return s.a.createElement(A,e)}}),s.a.createElement(u.a,{exact:!0,path:"/dashboard",render:function(a){return s.a.createElement(x,{setUser:e.setUser,itemsList:e.state.allItems,user:e.state.user})}}),s.a.createElement(u.a,{exact:!0,path:"/:notfound",component:L})))}}]),t}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));h.a.get("/api/auth/loggedin").then((function(e){var a=e.data;r.a.render(s.a.createElement(N.a,null,s.a.createElement(K,{user:a})),document.getElementById("root"))})),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))},9:function(e,a,t){}},[[40,1,2]]]);
//# sourceMappingURL=main.8e6fb95d.chunk.js.map